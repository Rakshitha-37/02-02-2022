#include<stdio.h>
#include<stdlib.h>
#include<stdio_ext.h>

#define NODES 6

typedef struct node
{
    char data;
    struct node *link;
}sll;

void insert(char data, sll **head_arg)
{
    sll *new = (sll *)malloc(sizeof(sll));
    if(new == NULL)
    {
        printf("Memory not allocated\n");
    }
    else
    {
        new->data  = data;
        new->link  = NULL;
        
        if(*head_arg == NULL)
        {
            *head_arg = new;
        }
        else
        {
        sll *temp = *head_arg;
        while(temp->link != NULL)
        {
            temp = temp->link;
        }
        temp->link = new;
        }
    }
}

void display(sll **head_arg)
{
    if(*head_arg == NULL)
    {
        printf("List is empty\n");
    }
    else
    {
        sll *temp = *head_arg;
        printf("Elements are: ");
        while(temp != NULL)
        {
            printf("%c ",temp->data);
            temp = temp->link;
        }
        printf("\n");
    }
}

void create_loop(sll **head_arg)
{
    sll *temp = *head_arg;
    if(*head_arg == NULL)
    {
        printf("List is empty\n");
    }
    else
    {
        while(temp->link != NULL)
        {
            temp=temp->link;
        }
        temp->link = (*head_arg)->link;
    }
}



int detect_loop(sll **head_arg)
{
    sll *prev,*next;
    prev = *head_arg;
    next = *head_arg;
    while(prev != NULL && next != NULL && next->link != NULL )
    {
        prev = prev->link;
        next = next->link->link;
        if(prev==next)
        {
            return 1;
        }
    }
    return 0;
    
}


int main()
{
    sll *head=NULL;
    int i=0,result;
    char data;
    while(i++ < NODES)
    {
        printf("Enter a character:");
        __fpurge(stdin);
        scanf("%c",&data);
        insert(data,&head);
    }
    display(&head);
    create_loop(&head);
    result=detect_loop(&head);
    if(result==1)
    printf("Loop is created\n");
    else
    printf("Loop is not created\n");
    
    return 0;
}



